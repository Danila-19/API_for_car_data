# API для сбора и фильтрации данных об автомобилях

## Описание

Этот проект представляет собой RESTful API для сбора и фильтрации данных об автомобилях. API разработан с использованием Django и Django REST Framework, с базой данных SQLite.

## Функциональность

### Добавление нового автомобиля

API поддерживает добавление, удаление, обновление, изменение нового автомобиля с помощью запросов на `/api/cars/` и `api/cars/<id>`.
Для создания нового автомобиля необходимо предоставить следующие данные:

- **Марка** (`brand`): строка, до 100 символов.
- **Модель** (`model`): строка, до 100 символов.
- **Год выпуска** (`year`): целое число, положительное.
- **Тип топлива** (`fuel_type`): строка, один из возможных вариантов (бензин, дизель, электричество, гибрид).
- **Тип КПП** (`transmission_type`): строка, один из возможных вариантов (механическая, автоматическая, вариатор, робот).
- **Пробег** (`mileage`): целое число, положительное.
- **Цена** (`price`): десятичное число с двумя знаками после запятой.

**Пример запроса:**

```http
POST /api/cars/
Content-Type: application/json

{
  "brand": "Toyota",
  "model": "Camry",
  "year": 2020,
  "fuel_type": "petrol",
  "transmission_type": "automatic",
  "mileage": 15000,
  "price": 30000.00
}
```
## Получение списка автомобилей с фильтрацией

API поддерживает фильтрацию автомобилей по следующим параметрам с помощью GET-запроса на /api/cars/:

- **Марка (brand): строка, может содержать подстроку (регистронезависимый поиск).**
- **Модель (model): строка, может содержать подстроку (регистронезависимый поиск).**
- **Год выпуска (year): целое число, можно использовать диапазоны (gte, lte).**
- **Тип топлива (fuel_type): строка, один из возможных вариантов.**
- **Тип КПП (transmission_type): строка, один из возможных вариантов.**
- **Пробег (mileage_min, mileage_max): целое число, диапазон.**
- **Цена (price_min, price_max): десятичное число, диапазон.**

**Пример запроса:**

```http
GET /api/cars/?brand=Toyota&year__gte=2018&price__lte=30000
```

## Получение токена

**Пример запроса:**

```http
POST /api/auth/token/login/

Тело запроса:
{
  "email": "your email",
  "password": "your password",
}
```

## Получение деталей конкретного автомобиля по ID

API поддерживает получение информации о конкретном автомобиле по его ID с помощью GET-запроса на /api/cars/{id}/.

**Пример запроса:**

```http
GET /api/cars/1/
```

## Технологии

- **Python 3.9.10**
- **Django 4.2.12**
- **Django REST Framework 3.15.2**
- **SQLite**
- **python-dotenv**
- **djoser 2.2.3**
- **drf-yasg 1.21.7**

## Установка и запуск

1. **Клонируйте репозиторий:**
```bash
git clone https://github.com/Danila-19/API_for_car_data.git
```

2. **Создайте и активируйте виртуальное окружение:**
```bash
python -m venv venv
source venv/bin/activate
```

3. **Установите зависимости:**
```bash
pip install -r requirements.txt
```

4. **Создайте файл .env в корневом каталоге и добавьте следующие переменные:**
```bash
DJANGO_SECRET_KEY='your-secret-key'
```

5. **Выполните миграции базы данных:**
```bash
python manage.py migrate
```

6. **Выполните миграции базы данных:**
```bash
python manage.py migrate
```

7. **Выполните загрузку тестовых данных:**
```bash
python manage.py loaddata test_cars.json
```

8. **Запустите сервер:**
```bash
python manage.py runserver
```

## Документация

- **Swagger UI: http://127.0.0.1:8000/api/swagger/**
- **ReDoc: http://127.0.0.1:8000/api/redoc/**

## Обработка ошибок

API возвращает соответствующие HTTP статусы в случае ошибок:

- **400 Bad Request: Неверные данные запроса.**
- **404 Not Found: Запрашиваемый ресурс не найден.**
- **401 Unauthorized: Необходима аутентификация.**